{% extends "the_base.html" %}
{% load static %}

{% block title %}MCP Server Documentation - KrisPC{% endblock %}

{% block description %}Documentation for integrating KrisPC's MCP (Model Context Protocol) server with AI assistants like Claude Desktop.{% endblock %}

{% block krispc_content %}
<div class="bg-slate-900 text-slate-100 rounded-2xl shadow-xl overflow-hidden border border-slate-800">
    <div class="px-8 py-12 sm:px-12">
        <h1 class="text-4xl font-bold text-primary mb-8 flex items-center">
             <span class="mr-4">ü§ñ</span> MCP Server for AI Assistants
        </h1>

        <div class="grid gap-8">
            <!-- Section: What is MCP? -->
            <section class="bg-slate-800/50 rounded-xl p-8 border border-slate-700">
                <h2 class="text-2xl font-semibold text-white mb-4">What is MCP?</h2>
                <p class="text-slate-300 leading-relaxed mb-4">
                    The <strong class="text-primary">Model Context Protocol (MCP)</strong> allows AI assistants like Claude Desktop
                    to interact with external services. KrisPC provides an MCP server that enables AI assistants to:
                </p>
                <ul class="list-disc pl-6 space-y-2 text-slate-400">
                    <li>Query available repair services and pricing</li>
                    <li>Get information about supported computer brands</li>
                    <li>Check service areas and coverage</li>
                    <li>Access technology stack information</li>
                </ul>
            </section>

            <!-- Section: Quick Setup -->
            <section class="bg-slate-800/50 rounded-xl p-8 border border-slate-700">
                <h2 class="text-2xl font-semibold text-white mb-6 flex items-center">
                    <span class="mr-3">üöÄ</span> Quick Setup
                </h2>

                <h3 class="text-lg font-medium text-slate-200 mb-3">1. Install Dependencies</h3>
                <pre class="bg-slate-950 p-4 rounded-lg border border-slate-800 mb-6 overflow-x-auto"><code class="text-primary">pip install mcp httpx</code></pre>

                <h3 class="text-lg font-medium text-slate-200 mb-3">2. Download the MCP Server</h3>
                <pre class="bg-slate-950 p-4 rounded-lg border border-slate-800 mb-6 overflow-x-auto"><code class="text-primary">curl -O https://krispc.fr/static/mcp/krispc_mcp_server.py</code></pre>

                <h3 class="text-lg font-medium text-slate-200 mb-3">3. Configure Claude Desktop</h3>
                <p class="text-slate-400 mb-3">Add to your <code class="bg-slate-900 text-accent px-1.5 py-0.5 rounded">claude_desktop_config.json</code>:</p>
                <pre class="bg-slate-950 p-4 rounded-lg border border-slate-800 overflow-x-auto"><code class="text-slate-300">{
  "mcpServers": {
    "krispc": {
      "command": "python",
      "args": ["/path/to/krispc_mcp_server.py"],
      "env": {
        "KRISPC_API_URL": "https://krispc.fr/api/krispc"
      }
    }
  }
}</code></pre>
            </section>

            <!-- Section: Available Tools -->
            <section class="bg-slate-800/50 rounded-xl p-8 border border-slate-700">
                <h2 class="text-2xl font-semibold text-white mb-6 flex items-center">
                    <span class="mr-3">üõ†Ô∏è</span> Available Tools
                </h2>

                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse">
                        <thead>
                            <tr class="border-b border-slate-700">
                                <th class="py-4 font-semibold text-primary">Tool Name</th>
                                <th class="py-4 font-semibold text-primary">Description</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-800 text-sm">
                            <tr>
                                <td class="py-4"><code class="text-accent">get_services</code></td>
                                <td class="py-4 text-slate-400">List all repair services with descriptions and pricing</td>
                            </tr>
                            <tr>
                                <td class="py-4"><code class="text-accent">get_brands</code></td>
                                <td class="py-4 text-slate-400">List supported computer manufacturers</td>
                            </tr>
                            <tr>
                                <td class="py-4"><code class="text-accent">get_service_areas</code></td>
                                <td class="py-4 text-slate-400">Get list of cities covered for on-site services</td>
                            </tr>
                            <tr>
                                <td class="py-4"><code class="text-accent">get_technologies</code></td>
                                <td class="py-4 text-slate-400">View technologies used to build the website</td>
                            </tr>
                            <tr>
                                <td class="py-4"><code class="text-accent">submit_contact</code></td>
                                <td class="py-4 text-slate-400">Submit a contact request for repair services</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Section: Related Resources -->
            <section class="bg-slate-800/50 rounded-xl p-8 border border-slate-700">
                <h2 class="text-2xl font-semibold text-white mb-6 flex items-center">
                    <span class="mr-3">üîó</span> Related Resources
                </h2>
                <ul class="space-y-3">
                    <li>
                        <a href="/api/krispc/swagger/" target="_blank" class="text-primary hover:text-primary-light flex items-center transition-colors">
                            <span class="mr-2">üëâ</span> Interactive API Documentation (Swagger)
                        </a>
                    </li>
                    <li>
                        <a href="/api/krispc/redoc/" target="_blank" class="text-primary hover:text-primary-light flex items-center transition-colors">
                            <span class="mr-2">üëâ</span> API Reference (ReDoc)
                        </a>
                    </li>
                    <li>
                        <a href="/api/krispc/schema/" target="_blank" class="text-primary hover:text-primary-light flex items-center transition-colors">
                            <span class="mr-2">üëâ</span> OpenAPI Schema (JSON)
                        </a>
                    </li>
                    <li>
                        <a href="/api/krispc/pricelist/" target="_blank" class="text-primary hover:text-primary-light flex items-center transition-colors">
                            <span class="mr-2">üëâ</span> Pricelist API (JSON)
                        </a>
                    </li>
                    <li>
                        <a href="https://modelcontextprotocol.io/docs" target="_blank" rel="noopener" class="text-primary hover:text-primary-light flex items-center transition-colors">
                            <span class="mr-2">üëâ</span> MCP Protocol Documentation
                        </a>
                    </li>
                </ul>
            </section>
        </div>

        <div class="mt-12 flex flex-col sm:flex-row justify-center items-center gap-4">
            <a href="{% url 'krispc:index' %}" class="px-8 py-3 rounded-xl border border-slate-700 text-slate-300 hover:bg-slate-800 transition-colors">
                Back to Home
            </a>
            <a href="/api/krispc/swagger/" target="_blank" class="px-8 py-3 rounded-xl bg-primary text-black font-bold hover:bg-primary-dark transition-colors">
                Try the API
            </a>
        </div>
    </div>
</div>
{% endblock %}
